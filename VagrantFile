Vagrant.configure("2") do |config|
    
  config.vm.define "ubWordPress" do |ubWordPress|
      ubWordPress.vm.box = "ubuntu/focal64"
      ubWordPress.vm.hostname = "ubWordPress"
      ubWordPress.vm.network "private_network", ip: "192.168.100.11", nic_type: "virtio", virtualbox__intnet: "keepcoding"
      ubWordPress.vm.network "forwarded_port", guest: 80, host: 8081
      ubWordPress.vm.box_check_update = false
      ##ubWordPress.vm.disk :disk, name: "backup", size: "10GB"
      ubWordPress.vm.provider "virtualbox" do |vb|
        vb.name = "VM1 WordPress" ##Necesario para StorageAttach
        vb.memory = "1024"
        ##Sacado de https://docs.oracle.com/en/virtualization/virtualbox/6.0/user/vboxmanage-modifyvm.html
        ##vb.customize ["modifyvm", :id, "--cpus", "1", "--memory", "1024"]
        vb.default_nic_type = "virtio"
        file_to_disk = "./datos/MariaBDD.vmdk"
        unless File.exist?(file_to_disk)
          vb.customize [ "createmedium", "disk", "--filename", "./datos/MariaBDD.vmdk", "--format", "vmdk", "--size", 1024 * 1 ]
        end
        vb.customize [ "storageattach", "VM1 WordPress" , "--storagectl", "SCSI", "--port", "2", "--device", "0", "--type", "hdd", "--medium", file_to_disk]
      end
        ubWordPress.vm.provision "shell", path: "scpVM1.sh"
    end

  config.vm.define "ubELK" do |ubELK|
    ubELK.vm.box = "ubuntu/focal64"
    ubELK.vm.hostname = "ubELK"
    ubELK.vm.network "private_network", ip: "192.168.100.11", nic_type: "virtio", virtualbox__intnet: "keepcoding"
    ubELK.vm.network "forwarded_port", guest: 80, host: 8080
    ubELK.vm.network "forwarded_port", guest: 5044, host: 5044
    ubELK.vm.box_check_update = false
    ##ubWordPress.vm.disk :disk, name: "backup", size: "10GB"
    ubELK.vm.provider "virtualbox" do |vb|
      vb.name = "VM2 Elk" ##Necesario para StorageAttach
      vb.memory = "4096"
      ##Sacado de https://docs.oracle.com/en/virtualization/virtualbox/6.0/user/vboxmanage-modifyvm.html
      ##vb.customize ["modifyvm", :id, "--cpus", "1", "--memory", "1024"]
      vb.default_nic_type = "virtio"
      file_to_disk = "./datos/ElasticSearch.vmdk"
      unless File.exist?(file_to_disk)
        vb.customize [ "createmedium", "disk", "--filename", "./datos/ElasticSearch.vmdk", "--format", "vmdk", "--size", 1024 * 1 ]
      end
      vb.customize [ "storageattach", "VM2 Elk" , "--storagectl", "SCSI", "--port", "2", "--device", "0", "--type", "hdd", "--medium", file_to_disk]
     end
     ubELK.vm.provision "shell", path: "scpVM2.sh"
    end
  
  end

